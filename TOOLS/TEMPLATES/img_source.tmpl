/*
 * 		STAR_NAME()
 *
 * Generated by stargen
 *
 * image source
 * Notes:
 *    This is a star generated from the image source template
 *    It will output a small image (200x100) with a 50x50 rectangle
 *    offset at 10,10.
 *
 * 
 *    
 * Programmer: 
 * Date: 
 * Modified: 
 *
 */

#include  "c:\\capsim\\include\\IIP\\dsp.h" 


parameters

PARAMETERS

end

output_buffer

	image_t y;
end

states
	int	done=FALSE;
end

declarations
	int i,j;
	int sample;
	dsp_Matrix_t	matrix;
	dsp_Matrix_Pt	matrix_P;
	dsp_Matrix_Pt	Dsp_GenMatrix();
	image_t		    img;
	
	
	
end

initialization_code

  /*
   * set the output buffer cell size to size of image
   */	
  set_cellsize_out(0,sizeof(image_t));


end

main_code
	if(done)return(0);
	
	done=TRUE;
	
	/*
	 * Dsp_GenMatrix does the memory allocation for the image matrix
	 */
	matrix_P = Dsp_GenMatrix(200,100,50,50,
                        10,10,
                        128,0,0);

	if(matrix_P==NULL) {
		sprintf(cs_consoleBuffer,"STAR_NAME: could not generate image \n");PrintConsole();
		return(1);
	}


    /*
     * Send image out
	 */

	img.width=matrix_P->width;
	img.height=matrix_P->height;
    img.image_PP=matrix_P->matrix_PP;

	if(it_out(0)) {
				KrnOverflow("STAR_NAME",0);
				return(99);
	}
	y(0) = img;
	
			
	
end

wrapup_code

end


