/*
 * 		STAR_NAME()
 *
 * Generated by stargen
 *
 * Floating Point Probe Star
 * Notes:
 *    This is a star generated from the floating point probe template
 *    It will input a sample, and print it to the console. If an
 *    output buffer is connected, the input sample 
 *    is outputted unmodified
 * 
 *    
 * Programmer: 
 * Date: 
 * Modified: 
 *
 */



parameters

PARAMETERS

end

states
	int numberInputBuffers;
	int numberOutputBuffers;
end

declarations
	int i,j,k;
	float sample;
end

initialization_code

   /*
    * Get the number of input buffers.
    * return if none connected with an error
    */
   if((numberInputBuffers = no_input_buffers()) <= 0) {
	   sprintf(cs_consoleBuffer,"STAR_NAME: no input buffers\n");PrintConsole();
	   return(1);
   }

   /*
    * Get the number of output buffers.
    * return if greater then number of input buffers with an error
    */

   if((numberOutputBuffers = no_output_buffers()) > numberInputBuffers) {
	  sprintf(cs_consoleBuffer,"STAR_NAME: more output than input buffers\n");PrintConsole();
	  return(2);
   }

   /*
    * set buffer sizes to float
    */
   for(i=0; i< numberInputBuffers; i++)
			set_cellsize_in(i,sizeof(float));
   for(i=0; i< numberOutputBuffers; i++)
			set_cellsize_out(0,sizeof(float));

end

main_code
	
	/* 
	 * This mode synchronizes all input buffers 
	 */
	for(i = min_avail(); i>0; i--) {
		for(j=0; j<numberInputBuffers; ++j) {
		
		    /*
		     * point to input sample
		     */
			it_in(j);
			
			if(j < numberOutputBuffers) {
			    /*
			     * just send samples from input to output buffers
			     */
				if(it_out(j)) {
					KrnOverflow("STAR_NAME",j);
					return(99);
				}
			    outf(j,0) = inf(j,0);

			}
			
			sample=inf(j,0);
			 
		    sprintf(cs_consoleBuffer,"%-10g  \n", sample);
				       PrintConsole();

		}
		    
	}


    return(0);

end

wrapup_code

end


